<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">

<head>
	
	<title>Add Patient</title>
	
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	
	<!-- Reference Bootstrap files -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
		  integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>

</head>

<body>

	<nav th:insert="~{index.html :: navbar}"></nav>

	<div class="container py-4 h-100">
		<div id="loginbox" class="row d-flex justify-content-center align-items-center h-100">
			<div class="col-12 col-md-8 col-lg-6 col-xl-5">
				<div class="card bg-dark text-white" style="border-radius: 1rem;">
					<div class="card-body p-5 text-center">

						<div class="mb-md-1 mt-md-4 pb-5">


							<h2 class="fw-bold mb-3 text-uppercase">Add Patient</h2>

							<form th:action="@{/employee/patients/processAddingPatient}"
								  th:object="${dtoUser}" method="POST"
								  class="form-horizontal">

								<div class="form-group">
									<div class="col-xs-15">
										<div>

											<!-- Check for registration error -->
											<div th:if="${registrationError}" class="alert alert-danger col-xs-offset-1 col-xs-10">
												<span th:text="${registrationError}"></span>
											</div>

										</div>
									</div>
								</div>

								<!-- Login -->
								<div class="form-outline form-white mb-3">
									<input type="text" th:field="*{login}" placeholder="Login name" id="typeLoginX" class="form-control "
										   th:errorclass="fieldError" />
								</div>

								<div th:if="${#fields.hasErrors('login')}" class="text-danger">
									<ul>
										<li th:each="err : ${#fields.errors('login')}" th:text="'Login - ' + ${err}" />
									</ul>
								</div>

								<!-- Password -->
								<div class="form-outline form-white mb-3">
									<input type="text" th:field="*{password}" placeholder="Password"  class="form-control "
										   th:errorclass="fieldError" />
								</div>

								<div th:if="${#fields.hasErrors('password')}"
									  class="text-danger">
									<ul>
										<li th:each="err : ${#fields.errors('password')}" th:text="'Password - ' + ${err}" />
									</ul>
								</div>


								<!-- Repeat Password -->
								<div class="form-outline form-white mb-3">
									<input type="text" th:field="*{matchingPassword}" placeholder="Repeat password"  class="form-control "
										   th:errorclass="fieldError" />
								</div>

								<div th:if="${#fields.hasErrors('matchingPassword')}"
									  class="text-danger">
									<ul>
										<li th:each="err : ${#fields.errors('matchingPassword')}" th:text="'Repeated password - ' + ${err}" />
									</ul>
								</div>

								<!-- First name -->
								<div class="form-outline form-white mb-3">
									<input type="text" th:field="*{firstName}" placeholder="First name"  class="form-control "
										   th:errorclass="fieldError" />
								</div>

								<div th:if="${#fields.hasErrors('firstName')}" class="text-danger">
									<ul>
										<li th:each="err : ${#fields.errors('firstName')}" th:text="'First name - ' + ${err}" />
									</ul>
								</div>

								<!-- Last name -->
								<div class="form-outline form-white mb-3">
									<input type="text" th:field="*{lastName}" placeholder="Last Name"  class="form-control "
										   th:errorclass="fieldError" />
								</div>

								<div th:if="${#fields.hasErrors('lastName')}" class="text-danger">
									<ul>
										<li th:each="err : ${#fields.errors('lastName')}" th:text="'Last name - ' + ${err}" />
									</ul>
								</div>

								<!-- Phone number -->
								<div class="form-outline form-white mb-3">
									<input type="text" th:field="*{phoneNumber}" placeholder="Phone number"  class="form-control "
										   th:errorclass="fieldError" />
								</div>

								<div th:if="${#fields.hasErrors('phoneNumber')}" class="text-danger">
									<ul>
										<li th:each="err : ${#fields.errors('phoneNumber')}" th:text="'Phone number - ' + ${err}" />
									</ul>
								</div>

								<!-- Email -->
								<div class="form-outline form-white mb-3">
									<input type="text" th:field="*{email}" placeholder="Email"  class="form-control "
										   th:errorclass="fieldError" />
								</div>

								<div th:if="${#fields.hasErrors('email')}" class="text-danger">
									<ul>
										<li th:each="err : ${#fields.errors('email')}" th:text="${err}" />
									</ul>
								</div>

								<!-- ROLE  -->
								<div class="form-outline form-white mb-3" sec:authorize="hasRole('ROLE_ADMIN')">
									<select class="form-control" th:field="*{role}" id="dropdown" >
										<option value="ROLE_USER">Patient</option>
										<option value="ROLE_EMPLOYEE">Employee</option>
										<option value="ROLE_ADMIN">Admin</option>
									</select>
								</div>


								<button class="btn btn-outline-light btn-lg px-5" type="submit">Register</button>

								<br>



							</form>
						</div>

						<div>
							<p class="mb-0"> <a th:href="@{/employee/patients/list}" class="text-white-50 fw-bold">Back to patients</a>
							</p>
						</div>



					</div>
				</div>
			</div>
		</div>
	</div>


</body>
</html>